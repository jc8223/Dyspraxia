<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Maze Runner</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            height: 100vh;
            background-color: #f4faff;
            touch-action: none; /* Disable pinch zoom */
        }

        #level-info {
            margin-bottom: 20px;
            font-size: 1.5em;
            color: #3e64ff;
        }

        #maze-container {
            position: relative;
            width: 90vmin;
            height: 90vmin;
            background-color: #f8f9fa;
            border: 5px solid #3e64ff;
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            grid-template-rows: repeat(10, 1fr);
            gap: 1px;
        }

        .cell {
            background-color: #e1ebfc;
            border: 1px solid #d6d6d6;
        }

        .wall {
            background-color: #3e64ff;
        }

        .goal {
            background-color: #5cb85c;
        }

        .ball {
            background-color: #f05050;
            border-radius: 50%;
        }

        #stats {
            margin-top: 20px;
            text-align: center;
            font-size: 1.2em;
        }

        #controls {
            display: none; /* Hide controls by default */
            margin-top: 20px;
        }

        .control-button {
            font-size: 2em;
            padding: 10px 20px;
            margin: 5px;
            background-color: #3e64ff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            #controls {
                display: block; /* Show controls on mobile */
            }
        }
    </style>
</head>
<body>
    <div id="level-info">Level: 1</div>
    <div>
        <div id="maze-container"></div>
        <div id="stats">
            <p>Total Attempts: <span id="attempts">0</span></p>
            <p>Time Left: <span id="timer">60</span> seconds</p>
        </div>
    </div>

    <div id="controls">
        <button class="control-button" onclick="moveBall(0, -1)">↑</button>
        <button class="control-button" onclick="moveBall(-1, 0)">←</button>
        <button class="control-button" onclick="moveBall(1, 0)">→</button>
        <button class="control-button" onclick="moveBall(0, 1)">↓</button>
    </div>

    <audio id="success-sound" src="https://www.soundjay.com/button/beep-07.wav"></audio>
    <audio id="error-sound" src="https://www.soundjay.com/button/beep-10.wav"></audio>
    <audio id="background-music" src="https://www.bensound.com/bensound-music/bensound-funnysong.mp3" loop></audio>

    <script>
        const levels = [
            // Level 1
            [
                [' ', ' ', ' ', 'W', 'W', 'W', ' ', ' ', ' ', 'G'],
                ['W', 'W', ' ', 'W', ' ', ' ', ' ', 'W', 'W', 'W'],
                [' ', ' ', ' ', 'W', ' ', 'W', ' ', ' ', ' ', ' '],
                [' ', 'W', ' ', ' ', ' ', 'W', 'W', 'W', 'W', ' '],
                [' ', 'W', 'W', 'W', ' ', ' ', ' ', ' ', 'W', ' '],
                [' ', ' ', ' ', ' ', ' ', 'W', 'W', ' ', 'W', ' '],
                ['W', 'W', 'W', 'W', ' ', 'W', ' ', ' ', 'W', ' '],
                [' ', ' ', ' ', ' ', ' ', ' ', ' ', 'W', 'W', ' '],
                [' ', 'W', 'W', 'W', 'W', 'W', ' ', ' ', ' ', ' '],
                ['S', ' ', ' ', ' ', ' ', ' ', 'W', 'W', 'W', ' '],
            ],
            // Level 2 (Harder)
            [
                [' ', 'W', 'W', 'W', 'W', 'W', 'W', 'W', ' ', 'G'],
                [' ', ' ', ' ', ' ', ' ', ' ', ' ', 'W', ' ', ' '],
                [' ', 'W', 'W', 'W', 'W', 'W', ' ', 'W', 'W', ' '],
                [' ', 'W', ' ', ' ', ' ', ' ', ' ', ' ', 'W', ' '],
                [' ', 'W', ' ', 'W', 'W', 'W', 'W', ' ', 'W', ' '],
                [' ', 'W', ' ', ' ', ' ', ' ', ' ', ' ', 'W', ' '],
                [' ', 'W', 'W', 'W', 'W', 'W', 'W', ' ', 'W', ' '],
                [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
                ['W', 'W', 'W', 'W', 'W', 'W', 'W', 'W', 'W', ' '],
                ['S', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
            ],
            // Level 3 (Harder)
            [
                [' ', 'W', ' ', ' ', ' ', 'W', ' ', ' ', ' ', 'G'],
                [' ', 'W', ' ', 'W', ' ', 'W', ' ', 'W', ' ', ' '],
                [' ', ' ', ' ', 'W', ' ', ' ', ' ', 'W', ' ', 'W'],
                [' ', 'W', 'W', 'W', ' ', 'W', ' ', ' ', ' ', 'W'],
                [' ', ' ', ' ', ' ', ' ', 'W', 'W', 'W', ' ', ' '],
                ['W', 'W', 'W', ' ', 'W', ' ', ' ', 'W', 'W', 'W'],
                [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
                ['W', ' ', 'W', 'W', 'W', 'W', 'W', 'W', ' ', 'W'],
                ['W', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
                ['S', ' ', 'W', 'W', 'W', 'W', 'W', 'W', 'W', ' '],
            ],
            // Level 4 (Harder)
            [
                [' ', 'W', ' ', 'W', 'W', 'W', 'W', 'W', ' ', 'G'],
                [' ', 'W', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
                [' ', 'W', 'W', 'W', 'W', 'W', ' ', 'W', ' ', ' '],
                [' ', ' ', ' ', ' ', ' ', ' ', ' ', 'W', ' ', ' '],
                [' ', 'W', 'W', 'W', 'W', 'W', 'W', ' ', ' ', 'W'],
                [' ', ' ', ' ', ' ', ' ', ' ', ' ', 'W', 'W', ' '],
                ['W', 'W', ' ', 'W', 'W', 'W', ' ', ' ', ' ', ' '],
                [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
                [' ', 'W', 'W', 'W', ' ', 'W', 'W', 'W', 'W', 'W'],
                ['S', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
            ],
            // Level 5 (Harder)
            [
                [' ', ' ', ' ', 'W', 'W', 'W', ' ', ' ', ' ', 'G'],
                ['W', 'W', ' ', 'W', ' ', ' ', ' ', 'W', 'W', 'W'],
                [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
                [' ', 'W', ' ', 'W', 'W', ' ', ' ', 'W', ' ', ' '],
                [' ', ' ', ' ', ' ', ' ', ' ', 'W', ' ', 'W', ' '],
                [' ', 'W', 'W', 'W', ' ', 'W', ' ', ' ', 'W', ' '],
                [' ', ' ', ' ', 'W', ' ', 'W', 'W', ' ', ' ', ' '],
                [' ', 'W', ' ', ' ', ' ', ' ', ' ', ' ', 'W', ' '],
                [' ', ' ', ' ', 'W', 'W', 'W', 'W', 'W', ' ', ' '],
                ['S', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
            ],
        ];

        const backgroundMusic = document.getElementById('background-music');
        backgroundMusic.play();

        let currentLevel = 0;
        let ballPosition = { x: 0, y: 9 };
        let attempts = 0;
        let timeLeft = 60;
        let timerInterval;

        const mazeContainer = document.getElementById('maze-container');
        const levelInfo = document.getElementById('level-info');
        const attemptsDisplay = document.getElementById('attempts');
        const timerDisplay = document.getElementById('timer');
        const successSound = document.getElementById('success-sound');
        const errorSound = document.getElementById('error-sound');

        function startTimer() {
            clearInterval(timerInterval); // Clear any existing timer
            timeLeft = 60; // Reset time
            timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    alert("Time's up! Try again.");
                    resetLevel();
                }
            }, 1000);
        }

        function resetLevel() {
            ballPosition = { x: 0, y: 9 };
            attempts = 0;
            attemptsDisplay.textContent = attempts;
            startTimer();
            renderMaze();
        }

        function renderMaze() {
            mazeContainer.innerHTML = '';
            const maze = levels[currentLevel];
            maze.forEach((row, y) => {
                row.forEach((cell, x) => {
                    const div = document.createElement('div');
                    div.classList.add('cell');
                    if (cell === 'W') div.classList.add('wall');
                    if (cell === 'G') div.classList.add('goal');
                    if (ballPosition.x === x && ballPosition.y === y) div.classList.add('ball');
                    mazeContainer.appendChild(div);
                });
            });
        }

        function moveBall(dx, dy) {
            const maze = levels[currentLevel];
            const newX = ballPosition.x + dx;
            const newY = ballPosition.y + dy;

            if (newX >= 0 && newY >= 0 && newX < 10 && newY < 10) {
                if (maze[newY][newX] === 'W') {
                    errorSound.play();
                    attempts++;
                } else {
                    ballPosition = { x: newX, y: newY };
                    if (maze[newY][newX] === 'G') {
                        successSound.play();
                        clearInterval(timerInterval);
                        if (currentLevel < levels.length - 1) {
                            alert(`Level ${currentLevel + 1} complete! Moving to Level ${currentLevel + 2}`);
                            currentLevel++;
                            resetLevel();
                        } else {
                            alert('Congratulations! You have completed all levels!');
                        }
                    }
                }
            }

            attempts++;
            attemptsDisplay.textContent = attempts;
            levelInfo.textContent = `Level: ${currentLevel + 1}`;
            renderMaze();
        }

        document.addEventListener('keydown', (e) => {
            switch (e.key) {
                case 'ArrowUp':
                    moveBall(0, -1);
                    break;
                case 'ArrowDown':
                    moveBall(0, 1);
                    break;
                case 'ArrowLeft':
                    moveBall(-1, 0);
                    break;
                case 'ArrowRight':
                    moveBall(1, 0);
                    break;
            }
        });

        startTimer();
        renderMaze();
    </script>
</body>
</html>
